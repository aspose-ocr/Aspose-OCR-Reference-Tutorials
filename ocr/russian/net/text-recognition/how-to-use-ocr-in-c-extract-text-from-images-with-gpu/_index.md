---
category: general
date: 2026-02-13
description: Узнайте, как использовать OCR в C# для извлечения текста из файлов изображений,
  включения обработки на GPU и быстрого преобразования сканов в текст.
draft: false
keywords:
- how to use OCR
- extract text from image
- how to extract text
- convert scan to text
- enable gpu processing
language: ru
og_description: Как использовать OCR в C#? Это руководство покажет, как извлекать
  текст из файлов изображений, включать обработку на GPU и преобразовывать сканы в
  текст.
og_title: Как использовать OCR в C# — извлекать текст из изображений с помощью GPU
tags:
- OCR
- C#
- Aspose
- GPU
- Image Processing
title: Как использовать OCR в C# – извлекать текст из изображений с помощью GPU
url: /ru/net/text-recognition/how-to-use-ocr-in-c-extract-text-from-images-with-gpu/
---

{{< blocks/products/pf/main-wrap-class >}}
{{< blocks/products/pf/main-container >}}
{{< blocks/products/pf/tutorial-page-section >}}

# Как использовать OCR в C# – извлекать текст из изображений с помощью GPU

Когда‑нибудь задавались вопросом **как использовать OCR**, чтобы извлечь текст из отсканированного документа без усилий? Вы не один — разработчики постоянно спрашивают: «Как эффективно извлечь текст из файлов изображений?» Хорошая новость в том, что с Aspose.OCR вы можете сделать именно это, а также **включить обработку на GPU** для заметного ускорения на поддерживаемом оборудовании.

В этом руководстве мы пройдем полный пример от начала до конца, который покажет вам **как использовать OCR**, как **извлечь текст из изображения**, как **преобразовать скан в текст**, и что делать, если GPU недоступен. К концу вы получите готовое к запуску консольное приложение C#, которое выводит распознанный текст и сообщает, использовался ли GPU.

## Что понадобится

- .NET 6 SDK или новее (код также работает с .NET Core)  
- Visual Studio 2022 или любой другой редактор по вашему выбору  
- Пакет Aspose.OCR для .NET (доступен через NuGet)  
- Файл изображения высокого разрешения (например, `highres_scan.tif`) для тестирования  

Никакой сложной настройки не требуется — просто несколько команд NuGet и вы готовы к работе.

## Шаг 1: Установить Aspose.OCR и подготовить проект

Сначала нужно добавить библиотеку OCR в ваш проект. Откройте терминал в папке решения и выполните:

```bash
dotnet new console -n OcrDemo
cd OcrDemo
dotnet add package Aspose.OCR
```

Это создаст новый консольный проект с именем **OcrDemo** и добавит пакет `Aspose.OCR`. Библиотека содержит класс `OcrEngine`, который мы будем использовать.

> **Pro tip:** Если у вас машина с выделенным GPU, убедитесь, что установлен последний драйвер графики; иначе библиотека автоматически переключится в режим CPU.

## Шаг 2: Написать полный код OCR

Теперь откройте `Program.cs` и замените его содержимое следующим кодом. Каждая строка прокомментирована, чтобы вы видели *почему* мы делаем то, что делаем.

```csharp
using System;
using Aspose.OCR;
using Aspose.OCR.Enums;

namespace OcrDemo
{
    class Program
    {
        static void Main(string[] args)
        {
            // -------------------------------------------------
            // 1️⃣  Create an OCR engine and request GPU processing.
            //    If the GPU isn’t present, Aspose.OCR will silently
            //    switch to CPU mode – no crash, no extra code needed.
            // -------------------------------------------------
            var ocrEngine = new OcrEngine
            {
                ProcessingMode = OcrProcessingMode.Gpu
            };

            // -------------------------------------------------
            // 2️⃣  Define the path to the image you want to process.
            //    Replace the placeholder with the actual file location.
            // -------------------------------------------------
            string imagePath = @"YOUR_DIRECTORY/highres_scan.tif";

            // -------------------------------------------------
            // 3️⃣  Perform the recognition. The method returns an
            //    OcrResult object that contains the extracted text,
            //    confidence scores, and more.
            // -------------------------------------------------
            OcrResult ocrResult = ocrEngine.RecognizeImage(imagePath);

            // -------------------------------------------------
            // 4️⃣  Report whether the GPU was really used.
            //    This is handy for debugging performance issues.
            // -------------------------------------------------
            Console.WriteLine($"GPU used: {ocrEngine.IsGpuEnabled}");

            // -------------------------------------------------
            // 5️⃣  Output the recognized text to the console.
            //    In a real app you might write this to a file,
            //    a database, or feed it into another workflow.
            // -------------------------------------------------
            Console.WriteLine("=== Extracted Text ===");
            Console.WriteLine(ocrResult.Text);
        }
    }
}
```

### Почему это работает

- **ProcessingMode = Gpu** указывает движку сначала попытаться использовать GPU. Библиотека абстрагирует низкоуровневые вызовы CUDA/OpenCL, так что вам не нужно управлять контекстами устройств вручную.  
- **IsGpuEnabled** — булево значение, подтверждающее, удалось ли использовать путь GPU. Если вы видите `false`, движок автоматически переключился на CPU — паниковать не нужно.  
- **RecognizeImage** выполняет всю тяжелую работу: загружает изображение, запускает OCR‑модель и возвращает результат в виде обычного текста. Нет необходимости вручную предобрабатывать bitmap, если только у вас нет особых требований (например, исправление наклона).

## Шаг 3: Запустить приложение и проверить вывод

Скомпилируйте и выполните:

```bash
dotnet run
```

Если всё настроено правильно, вы увидите что‑то вроде:

```
GPU used: True
=== Extracted Text ===
This is the first line of the scanned document.
Here is the second line, and so on…
```

Если GPU недоступен, первая строка будет `GPU used: False`, но извлечённый текст всё равно появится — благодаря плавному переключению на CPU.

> **Common question:** *Что если моё изображение в формате JPEG, а не TIFF?*  
> Метод `RecognizeImage` принимает любой формат, поддерживаемый `System.Drawing` в .NET (JPEG, PNG, BMP и т.д.). Просто измените расширение файла в `imagePath`.

## Шаг 4: Необязательно – настроить параметры для лучшей точности

Aspose.OCR предлагает несколько настроек, которые можно изменить:

| Setting | Что делает | Когда использовать |
|---------|------------|---------------------|
| `ocrEngine.Language` | Принудительно задаёт конкретный язык (например, `OcrLanguage.English`) | Если известен язык документа |
| `ocrEngine.PageSegMode` | Управляет тем, как движок разбивает страницу на блоки | Для макетов с несколькими колонками |
| `ocrEngine.DetectOrientation` | Автоматически вращает текст, который не расположен вертикально | Сканирования, которые могут быть перевёрнуты |

Эти свойства можно задать перед вызовом `RecognizeImage`. Например:

```csharp
ocrEngine.Language = OcrLanguage.English;
ocrEngine.DetectOrientation = true;
```

## Шаг 5: Визуализировать процесс (изображение с альтернативным текстом)

Ниже простая диаграмма, иллюстрирующая **как использовать OCR** с опциональным ускорением GPU. Она не обязательна для работы кода, но помогает увидеть общую картину.

![Diagram showing how to use OCR with GPU processing](/images/ocr-gpu-flow.png)

*Alt text:* *Диаграмма, показывающая, как использовать OCR с обработкой на GPU, с выделением переключения на CPU при необходимости.*

## Edge Cases & Troubleshooting

1. **Out‑of‑Memory on GPU** – Очень большие изображения могут превысить память GPU. В этом случае библиотека автоматически переключится на CPU. Вы можете предварительно масштабировать изображение, чтобы снизить потребление памяти.  
2. **Unsupported Image Format** – Если `RecognizeImage` бросает *NotSupportedException*, проверьте расширение файла и убедитесь, что изображение не повреждено. Часто помогает конвертация в PNG.  
3. **Low Confidence Scores** – Когда результат OCR содержит много нечитаемых символов, рассмотрите предобработку (бинаризацию, удаление шума) или переход к скану более высокого разрешения.  

## Wrap‑Up: Что мы достигли

Мы только что рассмотрели **как использовать OCR** в консольном приложении C#, продемонстрировали, как **извлечь текст из изображения**, и показали, как **включить обработку на GPU** для более быстрых результатов. Теперь вы знаете, как **преобразовать скан в текст**, проверить, использовался ли GPU, и настроить несколько параметров для крайних случаев.

### Следующие шаги

- Попробуйте передать вывод в **поисковый индекс** (например, Elasticsearch), чтобы ваши отсканированные PDF стали доступными для поиска.  
- Поэкспериментируйте с **пакетной обработкой** — пройдитесь по папке с изображениями и запишите каждый результат в файл `.txt`.  
- Скомбинируйте OCR с **API перевода**, чтобы автоматически переводить отсканированные документы на иностранном языке.  

Есть дополнительные вопросы? Оставьте комментарий, и удачной разработки!

{{< /blocks/products/pf/tutorial-page-section >}}
{{< /blocks/products/pf/main-container >}}
{{< /blocks/products/pf/main-wrap-class >}}
{{< blocks/products/products-backtop-button >}}